# React å’Œ Vite å…¥é—¨æŒ‡å—

## ç®€ä»‹

Vite æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®ƒæä¾›äº†æå¿«çš„å¼€å‘æœåŠ¡å™¨å¯åŠ¨é€Ÿåº¦å’Œçƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰åŠŸèƒ½ã€‚ç»“åˆ Reactï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºé«˜æ€§èƒ½çš„ Web åº”ç”¨ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© Viteï¼Ÿ

Vite ç›¸æ¯”ä¼ ç»Ÿçš„æ„å»ºå·¥å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

| ç‰¹æ€§ | Vite | Webpack |
|------|------|---------|
| å¯åŠ¨é€Ÿåº¦ | âš¡ æå¿«ï¼ˆæ¯«ç§’çº§ï¼‰ | ğŸ¢ è¾ƒæ…¢ï¼ˆç§’çº§ï¼‰ |
| çƒ­æ›´æ–° | âœ… å³æ—¶ | â±ï¸ éœ€è¦é‡æ–°æ„å»º |
| é…ç½®å¤æ‚åº¦ | ğŸ¯ ç®€å• | ğŸ”§ å¤æ‚ |
| ç”Ÿäº§æ„å»º | ğŸ“¦ Rollup | ğŸ“¦ Webpack |

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºé¡¹ç›®

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ Vite + React é¡¹ç›®ï¼š

```bash
npm create vite@latest my-react-app -- --template react
cd my-react-app
npm install
npm run dev
```

### 2. é¡¹ç›®ç»“æ„

åˆ›å»ºå®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
my-react-app/
â”œâ”€â”€ node_modules/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.jsx
â”‚   â”œâ”€â”€ main.jsx
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.js
```

### 3. é…ç½® Vite

åœ¨ `vite.config.js` ä¸­ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰é…ç½®ï¼š

```javascript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
    host: '0.0.0.0'
  }
})
```

## æ ¸å¿ƒæ¦‚å¿µ

### çƒ­æ¨¡å—æ›¿æ¢ (HMR)

Vite çš„ HMR åŠŸèƒ½å…è®¸ä½ åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹æ›´æ–°æ¨¡å—ï¼š

```jsx
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  
  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  )
}
```

### æ€§èƒ½ä¼˜åŒ–

Vite ä½¿ç”¨åŸç”Ÿ ES æ¨¡å—ï¼Œè¿™æ„å‘³ç€ï¼š

- **æŒ‰éœ€ç¼–è¯‘**ï¼šåªç¼–è¯‘å½“å‰é¡µé¢éœ€è¦çš„æ¨¡å—
- **é¢„æ„å»ºä¾èµ–**ï¼šä½¿ç”¨ esbuild é¢„æ„å»ºä¾èµ–ï¼Œé€Ÿåº¦æå¿«
- **æ™ºèƒ½ç¼“å­˜**ï¼šå……åˆ†åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜

## æ•°å­¦å…¬å¼ç¤ºä¾‹

Vite çš„æ„å»ºé€Ÿåº¦å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼š

$$
T_{build} = O(n) \text{ where } n = \text{changed modules}
$$

è€Œä¼ ç»Ÿæ‰“åŒ…å·¥å…·çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š

$$
T_{webpack} = O(N) \text{ where } N = \text{all modules}
$$

å› æ­¤ï¼Œå½“ $n \ll N$ æ—¶ï¼ŒVite çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ã€‚

## æœ€ä½³å®è·µ

1. **ä½¿ç”¨ TypeScript**ï¼šæé«˜ä»£ç è´¨é‡å’Œå¼€å‘ä½“éªŒ
2. **é…ç½®è·¯å¾„åˆ«å**ï¼šç®€åŒ–å¯¼å…¥è·¯å¾„
3. **ä»£ç åˆ†å‰²**ï¼šä½¿ç”¨åŠ¨æ€å¯¼å…¥ä¼˜åŒ–åŠ è½½æ€§èƒ½
4. **ç¯å¢ƒå˜é‡**ï¼šä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†é…ç½®

## å¸¸è§é—®é¢˜

### Q: Vite æ”¯æŒå“ªäº›æµè§ˆå™¨ï¼Ÿ

A: Vite é»˜è®¤æ”¯æŒç°ä»£æµè§ˆå™¨ï¼Œå¯¹äºæ—§æµè§ˆå™¨éœ€è¦ä½¿ç”¨ `@vitejs/plugin-legacy`ã€‚

### Q: å¦‚ä½•éƒ¨ç½² Vite åº”ç”¨ï¼Ÿ

A: è¿è¡Œ `npm run build` ç”Ÿæˆç”Ÿäº§ç‰ˆæœ¬ï¼Œç„¶åå°† `dist` ç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚

## æ€»ç»“

Vite æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œç®€å•çš„æ„å»ºå·¥å…·ï¼Œå®ƒä¸º React å¼€å‘æä¾›äº†æè‡´çš„å¼€å‘ä½“éªŒã€‚é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº† Vite çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚

**æ¨èèµ„æº**ï¼š
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Vite GitHub ä»“åº“](https://github.com/vitejs/vite)

---

*æœ€åæ›´æ–°ï¼š2024-12-15*
